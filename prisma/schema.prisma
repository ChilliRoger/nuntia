generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Feed {
  id          String   @id @default(uuid())
  url         String   @unique
  title       String?
  description String?
  siteUrl     String?
  iconUrl     String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  stories     Story[]
}

model Story {
  id        String   @id @default(uuid())
  guid      String   // Unique identifier from RSS (often URL or ID)
  title     String
  link      String
  pubDate   DateTime
  content   String? // Content/description for AI summary
  author    String?
  isRead    Boolean  @default(false)
  isSaved   Boolean  @default(false) // For bookmarks
  feedId    String
  feed      Feed     @relation(fields: [feedId], references: [id], onDelete: Cascade)
  createdAt DateTime @default(now())

  @@unique([feedId, guid]) // Prevent duplicate stories for the same feed
  @@index([pubDate]) // Optimize sorting by date
}
